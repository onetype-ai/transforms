INSERT INTO transforms (category_id, slug, name, description, icon, tier, overview, tag)
VALUES (
    1,
    'marquee',
    'Marquee',
    'Infinite scrolling marquee for logos, text, and any content.',
    'view_carousel',
    'free',
    $$Infinite scrolling marquee for logos, text, testimonials, and any content. Pure CSS animation - lightweight, smooth, and GPU-accelerated. No external dependencies.

### How it works

Put any elements inside the container and they scroll infinitely in a seamless loop. The content is automatically duplicated behind the scenes to fill the visible area, so it always looks continuous no matter how wide or narrow the screen is.

The animation runs on CSS transforms, which means it stays smooth at 60fps and doesn't block the main thread. Respects `prefers-reduced-motion` by pausing automatically for users who have reduced motion enabled.

### Directions

Scrolls left by default, but can go right, up, or down. Horizontal is the most common for logo bars and text tickers. Vertical works well for feature lists, news feeds, or sidebar content where you want items cycling through a fixed-height container.

### Fade and pause

Edge fading creates a gradient mask on both sides so content doesn't appear to start or stop abruptly - it fades in and out smoothly. Pause on hover stops the animation when users mouse over it, giving them time to read or interact with the content.

### Use cases

Logo bars showing client or partner brands. Bold text tickers for announcements and promotions. Testimonial cards scrolling horizontally. Feature lists cycling vertically. Works with any HTML - images, cards, badges, icons, or plain text.$$,
    NULL
)
RETURNING id;

-- Use the returned id as {transform_id} below:

INSERT INTO versions (transform_id, version, code, style, js, css, config, usage, previews)
VALUES (
    {transform_id},
    '1.0.0',
    $$const prefix = 'ot-marquee';
const vertical = data['direction'] === 'up' || data['direction'] === 'down';
const reverse = data['direction'] === 'right' || data['direction'] === 'down';
const axis = vertical ? 'Y' : 'X';

this.track = (items) =>
{
    const track = document.createElement('div');
    track.className = prefix + '-track';
    track.style.setProperty('--marquee-gap', data['gap'] + 'px');

    if(vertical)
    {
        track.classList.add(prefix + '-vertical');
    }

    const primary = document.createElement('div');
    primary.className = prefix + '-content';

    items.forEach((item) =>
    {
        primary.appendChild(item);
    });

    track.appendChild(primary);

    return { track: track, primary: primary };
};

this.fill = (track, primary) =>
{
    const container = vertical ? node.offsetHeight : node.offsetWidth;
    const content = vertical ? primary.offsetHeight : primary.offsetWidth;
    const copies = Math.ceil(container / content) + 2;

    for(let i = 0; i < copies; i++)
    {
        const clone = primary.cloneNode(true);
        clone.setAttribute('aria-hidden', 'true');
        track.appendChild(clone);
    }
};

this.animate = (track, primary) =>
{
    const size = vertical ? primary.offsetHeight : primary.offsetWidth;
    const distance = size + data['gap'];
    const name = prefix + '-' + Math.random().toString(36).substring(2, 7);

    this.sheet = document.createElement('style');
    this.sheet.textContent = '@keyframes ' + name + ' { from { transform: translate' + axis + '(0); } to { transform: translate' + axis + '(-' + distance + 'px); } }';
    document.head.appendChild(this.sheet);

    track.style.animation = name + ' ' + data['speed'] + 's linear infinite';

    if(reverse)
    {
        track.style.animationDirection = 'reverse';
    }
};

this.build = () =>
{
    const items = Array.from(node.children);

    node.classList.add(prefix);

    if(data['height'])
    {
        node.style.height = data['height'] + 'px';
    }

    if(data['pause'])
    {
        node.classList.add(prefix + '-pause');
    }

    if(data['fade'])
    {
        node.classList.add(prefix + '-fade');

        if(vertical)
        {
            node.classList.add(prefix + '-fade-vertical');
        }
    }

    const { track, primary } = this.track(items);

    node.innerHTML = '';
    node.appendChild(track);

    this.fill(track, primary);
    this.animate(track, primary);
};

this.build();$$,
    $$.ot-marquee {
    position: relative;
    overflow: hidden;
}

.ot-marquee-track {
    display: flex;
    gap: var(--marquee-gap, 40px);
    width: max-content;
    animation: ot-marquee-scroll var(--marquee-speed, 30s) linear infinite;
    animation-direction: var(--marquee-direction, normal);
}

.ot-marquee-track.ot-marquee-vertical {
    flex-direction: column;
    width: auto;
    height: max-content;
    animation-name: ot-marquee-scroll-vertical;
}

.ot-marquee-content {
    display: flex;
    align-items: center;
    gap: var(--marquee-gap, 40px);
    flex-shrink: 0;
}

.ot-marquee-vertical .ot-marquee-content {
    flex-direction: column;
}

.ot-marquee-pause:hover .ot-marquee-track {
    animation-play-state: paused !important;
}

.ot-marquee-fade {
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
}

.ot-marquee-fade-vertical {
    mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
}

@media (prefers-reduced-motion: reduce) {
    .ot-marquee-track {
        animation-play-state: paused;
    }
}$$,
    NULL,
    NULL,
    '{"speed": {"type": "number", "value": 30, "description": "Animation duration in seconds"}, "direction": {"type": "string", "value": "left", "description": "Scroll direction - left, right, up, or down"}, "gap": {"type": "number", "value": 40, "description": "Gap between items in pixels"}, "pause": {"type": "boolean", "value": true, "description": "Pause animation on hover"}, "fade": {"type": "boolean", "value": true, "description": "Fade edges with gradient mask"}, "height": {"type": "number", "value": 0, "description": "Container height in pixels for vertical mode"}}'::jsonb,
    $$<div ot="marquee">
    <div>Stripe</div>
    <div>Vercel</div>
    <div>Linear</div>
    <div>Figma</div>
    <div>Notion</div>
    <div>Slack</div>
</div>$$,
    ARRAY[
        $$// Logos
<style>
    .logos .badge { display: inline-flex; align-items: center; justify-content: center; padding: 12px 24px; background: var(--ot-bg-2); border: 1px solid var(--ot-bg-3-border); border-radius: var(--ot-radius-m); color: var(--ot-text-2); font-size: 14px; font-weight: 500; white-space: nowrap; }
</style>

<div ot="marquee" ot-speed="25" ot-gap="20" class="logos">
    <div class="badge">Stripe</div>
    <div class="badge">Vercel</div>
    <div class="badge">Linear</div>
    <div class="badge">Figma</div>
    <div class="badge">Notion</div>
    <div class="badge">Slack</div>
    <div class="badge">GitHub</div>
    <div class="badge">Framer</div>
</div>$$,
        $$// Testimonials
<style>
    .testimonials .review { display: flex; gap: 12px; align-items: flex-start; padding: var(--ot-spacing-m); background: var(--ot-bg-2); border: 1px solid var(--ot-bg-3-border); border-radius: var(--ot-radius-l); min-width: 280px; }
    .testimonials .avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--ot-brand); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px; flex-shrink: 0; }
    .testimonials .review-text { font-size: var(--ot-size-m); color: var(--ot-text-2); line-height: 1.4; }
    .testimonials .review-name { font-size: 12px; color: var(--ot-text-1); font-weight: 600; margin-top: 6px; }
</style>

<div ot="marquee" ot-speed="45" ot-gap="16" class="testimonials">
    <div class="review">
        <div class="avatar">A</div>
        <div><div class="review-text">"Completely transformed our website. The animations are smooth and professional."</div><div class="review-name">Alex Chen</div></div>
    </div>
    <div class="review">
        <div class="avatar">S</div>
        <div><div class="review-text">"So easy to set up. Had it running in under 5 minutes. Highly recommend."</div><div class="review-name">Sarah Kim</div></div>
    </div>
    <div class="review">
        <div class="avatar">M</div>
        <div><div class="review-text">"Our clients love the marquee effect. It adds so much life to landing pages."</div><div class="review-name">Mark Davis</div></div>
    </div>
    <div class="review">
        <div class="avatar">J</div>
        <div><div class="review-text">"Finally a solution that just works without any custom code headaches."</div><div class="review-name">Julia Park</div></div>
    </div>
</div>$$,
        $$// Text
<style>
    .text .item { font-size: 28px; font-weight: 700; color: var(--ot-text-1); white-space: nowrap; }
    .text .item span { color: var(--ot-brand); }
</style>

<div ot="marquee" ot-speed="20" ot-gap="60" ot-pause="false" ot-fade="false" class="text">
    <div class="item">Design <span>&#38;</span> Development</div>
    <div class="item">Branding <span>&#38;</span> Strategy</div>
    <div class="item">Motion <span>&#38;</span> Animation</div>
    <div class="item">Product <span>&#38;</span> Growth</div>
</div>$$
    ]
);
