INSERT INTO transforms (category_id, slug, name, description, icon, tier, overview, tag)
VALUES (
    1,
    'count-up',
    'Count Up',
    'Animated number counter that counts up when scrolled into view.',
    'trending_up',
    'pro',
    $$Animated number counter powered by CountUp.js. Numbers count up from zero (or any starting value) when they scroll into view - great for stats sections, pricing, dashboards, and anywhere you want numbers to feel alive.

### How it works

Add the transform to any element, set a target number, and it animates from start to end when the element enters the viewport. Uses IntersectionObserver internally so the animation only fires when the user actually sees it.

By default, the counter plays once and stays at the final number. You can also set it to replay every time the element scrolls back into view - useful for landing pages where users scroll up and down.

### Formatting

Numbers can be styled with prefixes and suffixes - dollar signs, percentage marks, "k" for thousands, or any text you want before or after the number. Supports decimal places for precision, and you can customize both the thousands separator and decimal character to match any locale.

### Easing

The default animation uses easing - it starts fast and slows down toward the end, which feels natural and draws attention to the final number. Turn easing off for a steady linear count, which works better for timers or countdowns where a constant speed makes more sense.$$,
    NULL
)
RETURNING id;

-- Use the returned id as {transform_id} below:

INSERT INTO versions (transform_id, version, code, style, js, css, config, usage, previews)
VALUES (
    {transform_id},
    '1.0.0',
    $$this.init = () =>
{
    const instance = new countUp.CountUp(node, data['end'], {
        startVal: data['start'],
        duration: data['duration'],
        decimalPlaces: data['decimals'],
        prefix: data['prefix'],
        suffix: data['suffix'],
        separator: data['separator'],
        decimal: data['decimal'],
        useEasing: data['easing'],
        enableScrollSpy: true,
        scrollSpyOnce: data['once']
    });

    if(instance.error)
    {
        console.error('count-up:', instance.error);
        return;
    }

    instance.handleScroll();
};

this.init();$$,
    NULL,
    ARRAY['https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.9.0/countUp.umd.min.js'],
    NULL,
    '{"end": {"type": "number", "value": 100, "description": "Target number to count up to"}, "start": {"type": "number", "value": 0, "description": "Starting number"}, "duration": {"type": "number", "value": 2, "description": "Animation duration in seconds"}, "decimals": {"type": "number", "value": 0, "description": "Number of decimal places"}, "prefix": {"type": "string", "value": "", "description": "Text before the number"}, "suffix": {"type": "string", "value": "", "description": "Text after the number"}, "separator": {"type": "string", "value": ",", "description": "Thousands separator character"}, "decimal": {"type": "string", "value": ".", "description": "Decimal separator character"}, "easing": {"type": "boolean", "value": true, "description": "Whether to use easing animation"}, "once": {"type": "boolean", "value": true, "description": "Whether to animate only once"}}'::jsonb,
    $$<div ot="count-up" ot-end="1500"></div>$$,
    ARRAY[
        $$// Currency
<style>
    .currency { text-align: center; padding: var(--ot-spacing-l) var(--ot-spacing-m); }
    .currency .number { font-size: 56px; font-weight: 800; color: var(--ot-green); letter-spacing: -2px; }
    .currency .label { color: var(--ot-text-2); font-size: var(--ot-size-m); margin-top: var(--ot-spacing-s); }
</style>

<div class="currency">
    <div ot="count-up" ot-end="25000" ot-prefix="$" ot-decimals="2" ot-duration="3" class="number"></div>
    <div class="label">Revenue this month</div>
</div>$$,
        $$// Default
<style>
    .default { text-align: center; padding: var(--ot-spacing-l) var(--ot-spacing-m); }
    .default .number { font-size: 64px; font-weight: 800; color: var(--ot-text-1); letter-spacing: -2px; }
    .default .label { color: var(--ot-text-2); font-size: var(--ot-size-m); margin-top: var(--ot-spacing-s); }
</style>

<div class="default">
    <div ot="count-up" ot-end="1500" class="number"></div>
    <div class="label">Total downloads</div>
</div>$$,
        $$// Stats
<style>
    .stats { display: flex; justify-content: center; gap: 60px; padding: var(--ot-spacing-l) var(--ot-spacing-m); }
    .stats .stat { text-align: center; }
    .stats .stat .number { font-size: 40px; font-weight: 700; letter-spacing: -1px; }
    .stats .stat .label { color: var(--ot-text-2); font-size: var(--ot-size-m); margin-top: var(--ot-spacing-x); }
</style>

<div class="stats">
    <div class="stat">
        <div ot="count-up" ot-end="132" ot-suffix="k" class="number" style="color: var(--ot-brand);"></div>
        <div class="label">Users</div>
    </div>
    <div class="stat">
        <div ot="count-up" ot-end="98" ot-suffix="%" ot-duration="3" class="number" style="color: var(--ot-green);"></div>
        <div class="label">Uptime</div>
    </div>
    <div class="stat">
        <div ot="count-up" ot-end="4.9" ot-decimals="1" ot-duration="2.5" class="number" style="color: var(--ot-orange);"></div>
        <div class="label">Rating</div>
    </div>
</div>$$
    ]
);
